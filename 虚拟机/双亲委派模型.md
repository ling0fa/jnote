[返回目录](../README.md)

### 双亲委派模型

- 一个类可能会被多个类加载器加载，所以**类加载器 + 类**才拥有唯一独立的类命名空间。
- 绝对部分应用程序都会使用三种系统提供的类加载器。
    - ① Bootstrap 类加载器，C++ 语言实现，默认负责加载 `JAVA_HOME/lib` 或被 `-Xbootclasspath` 指定的目录（按类似 rt.jar 名称识别，不同名则不加载）。如果自定义类加载器要把类委派给 Bootstrap 类加载器加载，getClassLoader 方法返回 null 即可。
    - ② Extension 类加载器，默认负责加载 `JAVA_HOME/lib/ext` 或者被 `java.ext.dirs` 指定的目录。
    - ③ Application 类加载器，加载用户路径（ClassPath）的类库。

<br>

- **双亲委派模型**：除了顶层的类加载器，其他类加载器都应该有父类加载器。所以类加载器收到加载请求，首先委派给父加载器，如果父类加载器的搜索范围内没有找到，子类加载器才会尝试自己去加载，这样就保证了一个类只会出现在一个类加载器中。
- 双亲委派模型是 Java 设计者的**推荐做法**，并非强制要求，但这种模型简单有效，但保证了 Java 程序的稳定运作。Tomcat 也使用了这种模型。
- 如果父类加载器中的类要引用子类加载器中的类，双亲委派模型就无法满足了，Java 团队引入了一个不太优雅的设计：设置线程的上下文类加载器。
- OSGi 甚至把类加载器变成了网状结构。 
